---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "polaris_gcp_archival_location Resource - terraform-provider-polaris"
subcategory: ""
description: |-
  The polaris_gcp_archival_location resource creates an RSC archival location
  for cloud native workloads. This resource requires that the GCP project has been
  onboarded with the CLOUD_NATIVE_ARCHIVAL feature.
  When creating an archival location, the region where the snapshots are stored
  needs to be specified:
  SOURCE_REGION - Store snapshots in the same region to minimize data
  transfer charges. This is the default behaviour when the region field is
  not specified.SPECIFIC_REGION - Storing snapshots in another region can increase total
  data transfer charges. The region field specifies the region.
  Custom storage encryption is enabled by specifying one or more customer managed
  key blocks. For SPECIFIC_REGION, a customer managed key block for the specific
  region must be specified. For SOURCE_REGION, a customer managed key block for
  each source region should be specified, source regions not having a customer
  managed key block will have its data encrypted with platform managed keys.
  -> Note: When using SOURCE_REGION the GCP bucket isn't created until the
  first protected object is archived.
---

# polaris_gcp_archival_location (Resource)

The `polaris_gcp_archival_location` resource creates an RSC archival location
for cloud native workloads. This resource requires that the GCP project has been
onboarded with the `CLOUD_NATIVE_ARCHIVAL` feature.

When creating an archival location, the region where the snapshots are stored
needs to be specified:
  * `SOURCE_REGION` - Store snapshots in the same region to minimize data
    transfer charges. This is the default behaviour when the `region` field is
    not specified.
  * `SPECIFIC_REGION` - Storing snapshots in another region can increase total
    data transfer charges. The `region` field specifies the region.

Custom storage encryption is enabled by specifying one or more customer managed
key blocks. For `SPECIFIC_REGION`, a customer managed key block for the specific
region must be specified. For `SOURCE_REGION`, a customer managed key block for
each source region should be specified, source regions not having a customer
managed key block will have its data encrypted with platform managed keys.

-> **Note:** When using `SOURCE_REGION` the GCP bucket isn't created until the
   first protected object is archived.

## Example Usage

```terraform
data "polaris_gcp_project" "project" {
  name = "my-gcp-project"
}

# Source region.
resource "polaris_gcp_archival_location" "archival_location" {
  cloud_account_id = data.polaris_gcp_project.project.id
  name             = "my-archival-location"
  bucket_prefix    = "my-bucket-prefix"
}

# Specific region.
resource "polaris_gcp_archival_location" "archival_location" {
  cloud_account_id = data.polaris_gcp_project.project.id
  name             = "my-archival-location"
  bucket_prefix    = "my-bucket-prefix"
  region           = "nam4"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `bucket_prefix` (String) GCP bucket prefix. The prefix cannot be longer than 19 characters. Note that `rubrik-` will always be prepended to the prefix. Changing this forces a new resource to be created.
- `cloud_account_id` (String) RSC cloud account ID (UUID). Changing this forces a new resource to be created.
- `name` (String) Name of the cloud native archival location.

### Optional

- `bucket_labels` (Map of String) GCP bucket labels. Each label will be added to the GCP bucket created by RSC.
- `customer_managed_key` (Block Set) Customer managed storage encryption. For `SPECIFIC_REGION`, a customer managed key block for the specific region must be specified. For `SOURCE_REGION`, a customer managed key block for each source region should be specified, source regions not having a customer managed key block will have its data encrypted with platform managed keys. (see [below for nested schema](#nestedblock--customer_managed_key))
- `region` (String) GCP region to store the snapshots in (`SPECIFIC_REGION`). If not specified, the snapshots will be stored in the same region as the workload (`SOURCE_REGION`). Changing this forces a new resource to be created.
- `storage_class` (String) AWS bucket storage class. Possible values are `ARCHIVE`, `COLDLINE`, `NEARLINE`, `STANDARD` and `DURABLE_REDUCED_AVAILABILITY`. Default value is `STANDARD`.

### Read-Only

- `connection_status` (String) Connection status of the cloud native archival location.
- `id` (String) Cloud native archival location ID (UUID).
- `location_template` (String) RSC location template. If a region was specified, it will be `SPECIFIC_REGION`, otherwise `SOURCE_REGION`.

<a id="nestedblock--customer_managed_key"></a>
### Nested Schema for `customer_managed_key`

Required:

- `name` (String) Key name.
- `region` (String) The region in which the key will be used.
- `ring_name` (String) Key ring name.

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = polaris_gcp_archival_location.archival_location
  id = "5f4f4a2d-aa6f-42b6-a580-4c4b3c6916f9"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
% terraform import polaris_gcp_archival_location.archival_location 5f4f4a2d-aa6f-42b6-a580-4c4b3c6916f9
```
