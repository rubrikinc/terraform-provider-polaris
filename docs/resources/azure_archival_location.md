---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "polaris_azure_archival_location Resource - terraform-provider-polaris"
subcategory: ""
description: |-
  The polaris_azure_archival_location resource creates an RSC archival location for
  cloud-native workloads. This resource requires that the Azure subscription has been
  onboarded with the cloud_native_archival feature.
  When creating an archival location, the region where the snapshots are stored needs
  to be specified:
    * SOURCE_REGION - Store snapshots in the same region to minimize data transfer
      charges. This is the default behaviour when the storage_account_region field is
      not specified.
    * SPECIFIC_REGION - Storing snapshots in another region can increase total data
      transfer charges. The storage_account_region field specifies the region.
  Custom storage encryption is enabled by specifying one or more customer_managed_key
  blocks. Each customer_managed_key block specifies the encryption details to use for
  a region. For other regions, data will be encrypted using platform managed keys.
  -> Note: The Azure storage account is not created until the first protected object
     is archived to the location.
---

# polaris_azure_archival_location (Resource)

The `polaris_azure_archival_location` resource creates an RSC archival location for
cloud-native workloads. This resource requires that the Azure subscription has been
onboarded with the `cloud_native_archival` feature.

When creating an archival location, the region where the snapshots are stored needs
to be specified:
  * `SOURCE_REGION` - Store snapshots in the same region to minimize data transfer
    charges. This is the default behaviour when the `storage_account_region` field is
    not specified.
  * `SPECIFIC_REGION` - Storing snapshots in another region can increase total data
    transfer charges. The `storage_account_region` field specifies the region.

Custom storage encryption is enabled by specifying one or more `customer_managed_key`
blocks. Each `customer_managed_key` block specifies the encryption details to use for
a region. For other regions, data will be encrypted using platform managed keys.

-> **Note:** The Azure storage account is not created until the first protected object
   is archived to the location.

## Example Usage

```terraform
data "polaris_azure_subscription" "archival" {
    name = "archival-subscription"
}

# Source region.
resource "polaris_azure_archival_location" "archival_location" {
  cloud_account_id            = data.polaris_azure_subscription.archival.id
  name                        = "my-archival-location"
  storage_account_name_prefix = "archival"
}

# Source region with a customer managed key.
resource "polaris_azure_archival_location" "archival_location" {
  cloud_account_id            = data.polaris_azure_subscription.archival.id
  name                        = "my-archival-location"
  storage_account_name_prefix = "archival"

  customer_managed_key {
    name       = "my-archival-key"
    region     = "eastus"
    vault_name = "my-archival-key-vault"
  }
}

# Specific region.
resource "polaris_azure_archival_location" "archival_location" {
  cloud_account_id            = data.polaris_azure_subscription.archival.id
  name                        = "my-archival-location"
  storage_account_name_prefix = "archival"
  storage_account_region      = "eastus2"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cloud_account_id` (String) RSC cloud account ID. Changing this forces a new resource to be created.
- `name` (String) Cloud native archival location name.
- `storage_account_name_prefix` (String) Azure storage account name prefix. The storage account name prefix cannot be longer than 14 characters and can only consist of numbers and lower case letters. Changing this forces a new resource to be created.

### Optional

- `customer_managed_key` (Block Set) Customer managed storage encryption. Specify the regions and their respective encryption details. For other regions, data will be encrypted using platform managed keys. (see [below for nested schema](#nestedblock--customer_managed_key))
- `redundancy` (String) Azure storage redundancy. Possible values are `GRS`, `GZRS`, `LRS`, `RA_GRS`, `RA_GZRS` and `ZRS`. Default value is `LRS`. Changing this forces a new resource to be created.
- `storage_account_region` (String) Azure region to store the snapshots in. If not specified, the snapshots will be stored in the same region as the workload. Changing this forces a new resource to be created.
- `storage_account_tags` (Map of String) Azure storage account tags. Each tag will be added to the storage account created by RSC.
- `storage_tier` (String) Azure storage tier. Possible values are `COOL` and `HOT`. Default value is `COOL`.

### Read-Only

- `connection_status` (String) Connection status of the cloud native archival location.
- `container_name` (String) Azure storage container name.
- `id` (String) Cloud native archival location ID (UUID).
- `location_template` (String) RSC location template. If a storage account region was specified, it will be `SPECIFIC_REGION`, otherwise `SOURCE_REGION`.

<a id="nestedblock--customer_managed_key"></a>
### Nested Schema for `customer_managed_key`

Required:

- `name` (String) Key name.
- `region` (String) The region in which the key will be used. Regions without customer managed keys will use platform managed keys.
- `vault_name` (String) Key vault name.
