---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "polaris_azure_private_container_registry Resource - terraform-provider-polaris"
subcategory: ""
description: |-
  The polaris_azure_private_container_registry resource enables the private
  container registry (PCR) feature for the RSC customer account. This disables the
  standard Rubrik container registry.
  ~> Note: Even though the polaris_azure_private_container_registry resource
  ID is an RSC cloud account ID, there can only be a single PCR per RSC
  customer account.
  Exocompute Image Bundles
  The following GraphQL query can be used to retrieve information about the image
  bundles used by RSC for exocompute:
  
  query ExotaskImageBundle {
    exotaskImageBundle {
      bundleImages {
        name
        sha
        tag
      }
      bundleVersion
      eksVersion
      repoUrl
    }
  }
  
  The repoUrl field holds the URL to the RSC container registry from where the
  RSC images can be pulled.
  The following GraphQL mutation can be used to set the approved bundle version
  for the RSC customer account:
  
  mutation SetBundleApprovalStatus($input: SetBundleApprovalStatusInput!) {
    setBundleApprovalStatus(input: $input)
  }
  
  The input is an object with the following structure:
  
  {
    "input": {
      "approvalStatus": "ACCEPTED",
      "bundleVersion": "1.164",
  	"bundleMetadata": {
        "eksVersion": "1.29"
      }
    }
  }
  
  Where approvalStatus can be either ACCEPTED or REJECTED. bundleVersion
  is the the bundle version being approved or rejected. eksVersion is the
  version of the customer's EKS cluster.
---

# polaris_azure_private_container_registry (Resource)

The `polaris_azure_private_container_registry` resource enables the private
container registry (PCR) feature for the RSC customer account. This disables the
standard Rubrik container registry.

~> **Note:** Even though the `polaris_azure_private_container_registry` resource
   ID is an RSC cloud account ID, there can only be a single PCR per RSC
   customer account.

## Exocompute Image Bundles
The following GraphQL query can be used to retrieve information about the image
bundles used by RSC for exocompute:
```graphql
query ExotaskImageBundle {
  exotaskImageBundle {
    bundleImages {
      name
      sha
      tag
    }
    bundleVersion
    eksVersion
    repoUrl
  }
}
```
The `repoUrl` field holds the URL to the RSC container registry from where the
RSC images can be pulled.

The following GraphQL mutation can be used to set the approved bundle version
for the RSC customer account:
```graphql
mutation SetBundleApprovalStatus($input: SetBundleApprovalStatusInput!) {
  setBundleApprovalStatus(input: $input)
}
```
The input is an object with the following structure:
```json
{
  "input": {
    "approvalStatus": "ACCEPTED",
    "bundleVersion": "1.164",
	"bundleMetadata": {
      "eksVersion": "1.29"
    }
  }
}
```
Where `approvalStatus` can be either `ACCEPTED` or `REJECTED`. `bundleVersion`
is the the bundle version being approved or rejected. `eksVersion` is the
version of the customer's EKS cluster.

## Example Usage

```terraform
data "polaris_azure_subscription" "subscription" {
  name = "subscription"
}

resource "polaris_azure_private_container_registry" "registry" {
  cloud_account_id = data.polaris_azure_subscription.subscription.id
  app_id           = "927dd42c-5517-4de0-944c-466b3e3c6e70"
  url              = "234567890121.dkr.ecr.us-east-2.amazonaws.com"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_id` (String) Azure app registration application ID. Also known as the client ID.
- `cloud_account_id` (String) RSC cloud account ID (UUID). Changing this forces a new resource to be created.
- `url` (String) URL for customer provided private container registry.

### Read-Only

- `id` (String) RSC cloud account ID (UUID).

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = polaris_azure_private_container_registry.registry
  id = "1571ec5d-1738-439e-9f49-1830fbecd1b2"
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
% terraform import polaris_azure_private_container_registry.registry 1571ec5d-1738-439e-9f49-1830fbecd1b2
```
