---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "polaris_aws_account Resource - terraform-provider-polaris"
subcategory: ""
description: |-
  The polaris_aws_account resource adds an AWS account to RSC. To grant RSC
  permissions to perform certain operations on the account, a Cloud Formation stack
  is created from a template provided by RSC.
  There are two ways to specify the AWS account to onboard:
  Using the profile field. The AWS profile is used to create the Cloud
  Formation stack and lookup the AWS account ID.Using the assume_rolefield with, or without, the profile field. If the
  profile field is omitted, the default profile is used. The profile is used
  to assume the role. The assumed role is then used and create the Cloud
  Formation stack and lookup the account ID.
  Any combination of different RSC features can be enabled for an account:
  cloud_native_protection - Provides protection for AWS EC2 instances and
  EBS volumes through the rules and policies of SLA Domains.exocompute - Provides snapshot indexing, file recovery and application
  protection of AWS objects.
---

# polaris_aws_account (Resource)

The `polaris_aws_account` resource adds an AWS account to RSC. To grant RSC
permissions to perform certain operations on the account, a Cloud Formation stack
is created from a template provided by RSC.

There are two ways to specify the AWS account to onboard:
 1. Using the `profile` field. The AWS profile is used to create the Cloud
    Formation stack and lookup the AWS account ID.
 2. Using the `assume_role`field with, or without, the `profile` field. If the
    `profile` field is omitted, the default profile is used. The profile is used
    to assume the role. The assumed role is then used and create the Cloud
    Formation stack and lookup the account ID.

Any combination of different RSC features can be enabled for an account:
  1. `cloud_native_protection` - Provides protection for AWS EC2 instances and
     EBS volumes through the rules and policies of SLA Domains.
  2. `exocompute` - Provides snapshot indexing, file recovery and application
     protection of AWS objects.

## Example Usage

```terraform
# Enable Cloud Native Protection
resource "polaris_aws_account" "default" {
  profile = "default"

  cloud_native_protection {
    permission_groups = [
      "BASIC",
    ]

    regions = [
      "us-east-2",
    ]
  }
}

# Enable Cloud Native Protection and Exocompute.
resource "polaris_aws_account" "default" {
  profile = "default"

  cloud_native_protection {
    permission_groups = [
      "BASIC",
    ]

    regions = [
      "us-east-2",
      "us-west-2",
    ]
  }

  exocompute {
    permission_groups = [
      "BASIC",
      "RSC_MANAGED_CLUSTER",
    ]

    regions = [
      "us-west-2",
    ]
  }
}

# Enable Cloud Native Protection and DSPM with Outpost.
resource "polaris_aws_account" "default" {
  profile = "default"

  cloud_native_protection {
    permission_groups = [
      "BASIC",
    ]

    regions = [
      "us-east-2",
      "us-west-2",
    ]
  }

  dspm {
    permission_groups = [
      "BASIC",
    ]

    regions = [
      "us-east-2",
      "us-west-2",
    ]
  }

  outpost {
    outpost_account_id      = "123456789123"
    outpost_account_profile = "outpost"

    permission_groups = [
      "BASIC",
    ]

    regions = [
      "us-east-2",
      "us-west-2",
    ]
  }
}

# Enable Cloud Native Protection and Data Scanning with Outpost.
resource "polaris_aws_account" "default" {
  profile = "default"

  cloud_native_protection {
    permission_groups = [
      "BASIC",
    ]

    regions = [
      "us-east-2",
      "us-west-2",
    ]
  }

  data_scanning {
    permission_groups = [
      "BASIC",
    ]

    regions = [
      "us-east-2",
      "us-west-2",
    ]
  }

  outpost {
    outpost_account_id      = "123456789123"
    outpost_account_profile = "outpost"

    permission_groups = [
      "BASIC",
    ]

    regions = [
      "us-east-2",
      "us-west-2",
    ]
  }
}



# The Couldformation stack ARN is available after creation
output "stack_arn" {
  value = polaris_aws_account.default.exocompute[0].stack_arn
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cloud_native_protection` (Block List, Min: 1, Max: 1) Enable the Cloud Native Protection feature for the AWS account. (see [below for nested schema](#nestedblock--cloud_native_protection))

### Optional

- `assume_role` (String) Role ARN of role to assume.
- `data_scanning` (Block List, Max: 1) Enable the Data Scanning feature for the account. (see [below for nested schema](#nestedblock--data_scanning))
- `delete_snapshots_on_destroy` (Boolean) Should snapshots be deleted when the resource is destroyed.
- `dspm` (Block List, Max: 1) Enable the DSPM feature for the account. (see [below for nested schema](#nestedblock--dspm))
- `exocompute` (Block List, Max: 1) Enable the Exocompute feature for the account. (see [below for nested schema](#nestedblock--exocompute))
- `name` (String) Account name in Polaris. If not given the name is taken from AWS Organizations or, if the required permissions are missing, is derived from the AWS account ID and the named profile.
- `outpost` (Block List, Max: 1) Enable the Outpost feature for the account. (see [below for nested schema](#nestedblock--outpost))
- `permissions` (String) When set to 'update' feature permissions can be updated by applying the configuration.
- `profile` (String) AWS named profile.

### Read-Only

- `id` (String) RSC cloud account ID (UUID).

<a id="nestedblock--cloud_native_protection"></a>
### Nested Schema for `cloud_native_protection`

Required:

- `regions` (Set of String) Regions that RSC will monitor for instances to automatically protect.

Optional:

- `permission_groups` (Set of String) Permission groups to assign to the Cloud Native Protection feature. Possible values are `BASIC`, `EXPORT_AND_RESTORE`, `FILE_LEVEL_RECOVERY` and `SNAPSHOT_PRIVATE_ACCESS`.

Read-Only:

- `stack_arn` (String) Cloudformation stack ARN.
- `status` (String) Status of the Cloud Native Protection feature.


<a id="nestedblock--data_scanning"></a>
### Nested Schema for `data_scanning`

Required:

- `permission_groups` (Set of String) Permission groups to assign to the Data Scanning feature. Possible values are `BASIC`.
- `regions` (Set of String) Regions to enable the Data Scanning feature in.

Read-Only:

- `stack_arn` (String) Cloudformation stack ARN.
- `status` (String) Status of the Data Scanning feature.


<a id="nestedblock--dspm"></a>
### Nested Schema for `dspm`

Required:

- `permission_groups` (Set of String) Permission groups to assign to the DSPM feature. Possible values are `BASIC`.
- `regions` (Set of String) Regions to enable the DSPM feature in.

Read-Only:

- `stack_arn` (String) Cloudformation stack ARN.
- `status` (String) Status of the DSPM feature.


<a id="nestedblock--exocompute"></a>
### Nested Schema for `exocompute`

Required:

- `regions` (Set of String) Regions to enable the Exocompute feature in.

Optional:

- `permission_groups` (Set of String) Permission groups to assign to the Exocompute feature. Possible values are `BASIC`, `PRIVATE_ENDPOINT` and `RSC_MANAGED_CLUSTER`.

Read-Only:

- `stack_arn` (String) Cloudformation stack ARN.
- `status` (String) Status of the Exocompute feature.


<a id="nestedblock--outpost"></a>
### Nested Schema for `outpost`

Required:

- `outpost_account_id` (String) AWS account ID of the outpost account.
- `permission_groups` (Set of String) Permission groups to assign to the Data Scanning feature. Possible values are `BASIC`.
- `regions` (Set of String) Regions to enable the Outpost feature in.

Optional:

- `outpost_account_profile` (String) AWS named profile for the outpost account.

Read-Only:

- `stack_arn` (String) Cloudformation stack ARN.
- `status` (String) Status of the Outpost feature.
