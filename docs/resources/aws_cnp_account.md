---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "polaris_aws_cnp_account Resource - terraform-provider-polaris"
subcategory: ""
description: |-
  The polaris_aws_cnp_account resource adds an AWS account to RSC using the non-CFT
  (Cloud Formation Template) workflow. The polaris_aws_account resource can be used to
  add an AWS account to RSC using the CFT workflow.
  Permission Groups
  Following is a list of features and their applicable permission groups. These are used
  when specifying the feature set.
  CLOUDNATIVEARCHIVAL
  BASIC - Represents the basic set of permissions required to onboard the feature.
  CLOUDNATIVEPROTECTION
  BASIC - Represents the basic set of permissions required to onboard the feature.EXPORT_AND_RESTORE - Represents the set of permissions required for export and
  restore operations.FILE_LEVEL_RECOVERY - Represents the set of permissions required for file-level
  recovery operations.SNAPSHOT_PRIVATE_ACCESS - Represents the set of permissions required for private
  access to disk snapshots.
  CLOUDNATIVES3_PROTECTION
  BASIC - Represents the basic set of permissions required to onboard the feature.
  EXOCOMPUTE
  BASIC - Represents the basic set of permissions required to onboard the feature.PRIVATE_ENDPOINTS - Represents the set of permissions required for usage of
  private endpoints.RSC_MANAGED_CLUSTER - Represents the set of permissions required for the Rubrik-
  managed Exocompute cluster.
  RDS_PROTECTION
  BASIC - Represents the basic set of permissions required to onboard the feature.
  -> Note: When permission groups are specified, the BASIC permission group must
     always be included.
---

# polaris_aws_cnp_account (Resource)

The `polaris_aws_cnp_account` resource adds an AWS account to RSC using the non-CFT
(Cloud Formation Template) workflow. The `polaris_aws_account` resource can be used to
add an AWS account to RSC using the CFT workflow.

## Permission Groups
Following is a list of features and their applicable permission groups. These are used
when specifying the feature set.

### CLOUD_NATIVE_ARCHIVAL
  * `BASIC` - Represents the basic set of permissions required to onboard the feature.

### CLOUD_NATIVE_PROTECTION
  * `BASIC` - Represents the basic set of permissions required to onboard the feature.
  * `EXPORT_AND_RESTORE` - Represents the set of permissions required for export and
    restore operations.
  * `FILE_LEVEL_RECOVERY` - Represents the set of permissions required for file-level
    recovery operations.
  * `SNAPSHOT_PRIVATE_ACCESS` - Represents the set of permissions required for private
    access to disk snapshots.

### CLOUD_NATIVE_S3_PROTECTION
  * `BASIC` - Represents the basic set of permissions required to onboard the feature.

### EXOCOMPUTE
  * `BASIC` - Represents the basic set of permissions required to onboard the feature.
  * `PRIVATE_ENDPOINTS` - Represents the set of permissions required for usage of
    private endpoints.
  * `RSC_MANAGED_CLUSTER` - Represents the set of permissions required for the Rubrik-
    managed Exocompute cluster.

### RDS_PROTECTION
  * `BASIC` - Represents the basic set of permissions required to onboard the feature.

-> **Note:** When permission groups are specified, the `BASIC` permission group must
   always be included.

## Example Usage

```terraform
# Hardcoded values. Permission groups defaults to BASIC.
resource "polaris_aws_cnp_account" "account" {
  name      = "My Account"
  native_id = "123456789123"

  regions = [
    "us-east-2",
    "us-west-2",
  ]

  feature {
    name = "CLOUD_NATIVE_ARCHIVAL"
  }

  feature {
    name = "CLOUD_NATIVE_PROTECTION"

    permission_groups = [
      "BASIC",
      "EXPORT_AND_RESTORE",
    ]
  }
}

# Using variables for the account values and the features. The dynamic
# feature block could also be expanded from the polaris_aws_cnp_artifacts
# data source.
resource "polaris_aws_cnp_account" "account" {
  cloud       = var.cloud
  external_id = var.external_id
  name        = var.name
  native_id   = var.native_id
  regions     = var.regions

  dynamic "feature" {
    for_each = var.features
    content {
      name              = feature.value["name"]
      permission_groups = feature.value["permission_groups"]
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `feature` (Block Set, Min: 1) RSC feature with optional permission groups. (see [below for nested schema](#nestedblock--feature))
- `native_id` (String) AWS account ID. Changing this forces a new resource to be created.
- `regions` (Set of String) Regions.

### Optional

- `cloud` (String) AWS cloud type. Possible values are `STANDARD`, `CHINA` and `GOV`. Default value is `STANDARD`. Changing this forces a new resource to be created.
- `delete_snapshots_on_destroy` (Boolean) Should snapshots be deleted when the resource is destroyed.
- `external_id` (String) External ID. Changing this forces a new resource to be created.
- `name` (String) Account name.

### Read-Only

- `id` (String) RSC cloud account ID (UUID).

<a id="nestedblock--feature"></a>
### Nested Schema for `feature`

Required:

- `name` (String) RSC feature name. Possible values are `CLOUD_NATIVE_ARCHIVAL`, `CLOUD_NATIVE_PROTECTION`, `CLOUD_NATIVE_S3_PROTECTION`, `EXOCOMPUTE` and `RDS_PROTECTION`.
- `permission_groups` (Set of String) RSC permission groups for the feature. Possible values are `BASIC`, `EXPORT_AND_RESTORE`, `SNAPSHOT_PRIVATE_ACCESS`, `PRIVATE_ENDPOINT` and `RSC_MANAGED_CLUSTER`. For backwards compatibility, `[]` is interpreted as all applicable permission groups.
