---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "polaris_azure_permissions Data Source - terraform-provider-polaris"
subcategory: ""
description: |-
  The polaris_azure_permissions data source is used to access information about
  the permissions required by RSC for a specified RSC feature.
  The polaris_azure_permissions data source can be used with the permissions
  field of the polaris_azure_subscription resource and the
  azurerm_role_definition resource to automatically update the permissions of
  roles and notify RSC about the updated permissions.
  Permission Groups
  Following is a list of features and their applicable permission groups. These
  are used when specifying the feature set.
  AZURE_SQL_DB_PROTECTION
  BASIC - Represents the basic set of permissions required to onboard the
  feature.RECOVERY - Represents the set of permissions required for all recovery
  operations.BACKUP_V2 - Represents the set of permissions required for immutable
  backup V2 operations.
  AZURE_SQL_MI_PROTECTION
  BASIC - Represents the basic set of permissions required to onboard the
  feature.RECOVERY - Represents the set of permissions required for all recovery
  operations.BACKUP_V2 - Represents the set of permissions required for immutable
  backup V2 operations.
  CLOUD_NATIVE_ARCHIVAL
  BASIC - Represents the basic set of permissions required to onboard the
  feature.ENCRYPTION - Represents the set of permissions required for encryption
  operation.SQL_ARCHIVAL - Represents the permissions required to enable Azure AD
  authorization to store Azure SQL and MI snapshots in an archival location.
  CLOUD_NATIVE_ARCHIVAL_ENCRYPTION
  BASIC - Represents the basic set of permissions required to onboard the
  feature.ENCRYPTION - Represents the set of permissions required for encryption
  operation.
  CLOUD_NATIVE_BLOB_PROTECTION
  BASIC - Represents the basic set of permissions required to onboard the
  feature.RECOVERY - Represents the set of permissions required for all recovery
  operations.
  CLOUD_NATIVE_PROTECTION
  BASIC - Represents the basic set of permissions required to onboard the
  feature.EXPORT_AND_RESTORE - Represents the set of permissions required for export
  and restore operations.FILE_LEVEL_RECOVERY - Represents the set of permissions required for
  file-level recovery operations.SNAPSHOT_PRIVATE_ACCESS - Represents the set of permissions required for
  private access to disk snapshots.
  EXOCOMPUTE
  BASIC - Represents the basic set of permissions required to onboard the
  feature.PRIVATE_ENDPOINTS - Represents the set of permissions required for usage
  of private endpoints.CUSTOMER_MANAGED_BASIC - Represents the permissions required to enable
  customer-managed Exocompute feature.
  -> Note: To better fit the RSC Azure permission model where each RSC feature
  have two Azure roles, the features field has been deprecated and replaced
  with the feature field.
  -> Note: Due to the RSC Azure permission model having been refined into
  subscription level permissions and resource group level permissions, the
  actions, data_actions, not_actions and not_data_actions fields have
  been deprecated and replaced with the corresponding subscription and resource
  group fields.
  -> Note: Due to backward compatibility, the features field allow the
  feature names to be given in 3 different styles: EXAMPLE_FEATURE_NAME,
  example-feature-name or example_feature_name. The recommended style is
  EXAMPLE_FEATURE_NAME as it is what the RSC API itself uses.
---

# polaris_azure_permissions (Data Source)

The `polaris_azure_permissions` data source is used to access information about
the permissions required by RSC for a specified RSC feature. 

The `polaris_azure_permissions` data source can be used with the `permissions`
field of the `polaris_azure_subscription` resource and the
`azurerm_role_definition` resource to automatically update the permissions of
roles and notify RSC about the updated permissions.

## Permission Groups
Following is a list of features and their applicable permission groups. These
are used when specifying the feature set.

`AZURE_SQL_DB_PROTECTION`
  * `BASIC` - Represents the basic set of permissions required to onboard the
    feature.
  * `RECOVERY` - Represents the set of permissions required for all recovery
    operations.
  * `BACKUP_V2` - Represents the set of permissions required for immutable
    backup V2 operations.

`AZURE_SQL_MI_PROTECTION`
  * `BASIC` - Represents the basic set of permissions required to onboard the
    feature.
  * `RECOVERY` - Represents the set of permissions required for all recovery
    operations.
  * `BACKUP_V2` - Represents the set of permissions required for immutable
    backup V2 operations.

`CLOUD_NATIVE_ARCHIVAL`
  * `BASIC` - Represents the basic set of permissions required to onboard the
    feature.
  * `ENCRYPTION` - Represents the set of permissions required for encryption
    operation.
  * `SQL_ARCHIVAL` - Represents the permissions required to enable Azure AD
    authorization to store Azure SQL and MI snapshots in an archival location.

`CLOUD_NATIVE_ARCHIVAL_ENCRYPTION`
  * `BASIC` - Represents the basic set of permissions required to onboard the
    feature.
  * `ENCRYPTION` - Represents the set of permissions required for encryption
    operation.

`CLOUD_NATIVE_BLOB_PROTECTION`
  * `BASIC` - Represents the basic set of permissions required to onboard the
    feature.
  * `RECOVERY` - Represents the set of permissions required for all recovery
    operations.

`CLOUD_NATIVE_PROTECTION`
  * `BASIC` - Represents the basic set of permissions required to onboard the
    feature.
  * `EXPORT_AND_RESTORE` - Represents the set of permissions required for export
    and restore operations.
  * `FILE_LEVEL_RECOVERY` - Represents the set of permissions required for
    file-level recovery operations.
  * `SNAPSHOT_PRIVATE_ACCESS` - Represents the set of permissions required for
    private access to disk snapshots.

`EXOCOMPUTE`
  * `BASIC` - Represents the basic set of permissions required to onboard the
    feature.
  * `PRIVATE_ENDPOINTS` - Represents the set of permissions required for usage
    of private endpoints.
  * `CUSTOMER_MANAGED_BASIC` - Represents the permissions required to enable
    customer-managed Exocompute feature.

-> **Note:** To better fit the RSC Azure permission model where each RSC feature
   have two Azure roles, the `features` field has been deprecated and replaced
   with the `feature` field.

-> **Note:** Due to the RSC Azure permission model having been refined into
   subscription level permissions and resource group level permissions, the
   `actions`, `data_actions`, `not_actions` and `not_data_actions` fields have
   been deprecated and replaced with the corresponding subscription and resource
   group fields.

-> **Note:** Due to backward compatibility, the `features` field allow the
   feature names to be given in 3 different styles: `EXAMPLE_FEATURE_NAME`,
   `example-feature-name` or `example_feature_name`. The recommended style is
   `EXAMPLE_FEATURE_NAME` as it is what the RSC API itself uses.

## Example Usage

```terraform
# Permissions required for the Cloud Native Protection RSC feature with
# the specified permission groups.
data "polaris_azure_permissions" "cloud_native_protection" {
  feature = "CLOUD_NATIVE_PROTECTION"
  permission_groups = [
    "BASIC",
    "EXPORT_AND_RESTORE",
    "FILE_LEVEL_RECOVERY",
  ]
}

# Permissions required for the Exocompute RSC feature. The subscription
# is set up to notify RSC when the permissions are updated for the feature.
data "polaris_azure_permissions" "exocompute" {
  feature = "EXOCOMPUTE"
  permission_groups = [
    "BASIC",
  ]
}

resource "polaris_azure_subscription" "subscription" {
  subscription_id = "31be1bb0-c76c-11eb-9217-afdffe83a002"
  tenant_domain   = "my-domain.onmicrosoft.com"

  exocompute {
    permissions           = data.polaris_azure_permissions.exocompute.id
    permission_groups     = data.polaris_azure_permissions.exocompute.permission_groups
    resource_group_name   = "my-east-resource-group"
    resource_group_region = "eastus2"

    regions = [
      "eastus2",
    ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `feature` (String) RSC feature. Note that the feature name must be given in the `EXAMPLE_FEATURE_NAME` style. Possible values are `AZURE_SQL_DB_PROTECTION`, `AZURE_SQL_MI_PROTECTION`,  `CLOUD_NATIVE_ARCHIVAL`, `CLOUD_NATIVE_ARCHIVAL_ENCRYPTION`, `CLOUD_NATIVE_BLOB_PROTECTION`, `CLOUD_NATIVE_PROTECTION` and `EXOCOMPUTE`.
- `features` (Set of String, Deprecated) RSC features. Possible values are `AZURE_SQL_DB_PROTECTION`, `AZURE_SQL_MI_PROTECTION`, `CLOUD_NATIVE_ARCHIVAL`, `CLOUD_NATIVE_ARCHIVAL_ENCRYPTION`, `CLOUD_NATIVE_BLOB_PROTECTION`, `CLOUD_NATIVE_PROTECTION` and `EXOCOMPUTE`. **Deprecated:** use `feature` instead.
- `permission_groups` (Set of String) Permission groups for the RSC feature. Possible values are `BASIC`, `EXPORT_AND_RESTORE`, `FILE_LEVEL_RECOVERY`, `SNAPSHOT_PRIVATE_ACCESS`, `PRIVATE_ENDPOINTS`, `CUSTOMER_MANAGED_BASIC`, `ENCRYPTION`, `SQL_ARCHIVAL`, `RECOVERY` and `BACKUP_V2`.

### Read-Only

- `actions` (List of String, Deprecated) Azure allowed actions. **Deprecated:** use `subscription_actions` and `resource_group_actions` instead.
- `data_actions` (List of String, Deprecated) Azure allowed data actions. **Deprecated:** use `subscription_data_actions` and `resource_group_data_actions` instead.
- `hash` (String, Deprecated) SHA-256 hash of the permissions, can be used to detect changes to the permissions. **Deprecated:** use `id` instead.
- `id` (String) SHA-256 hash of the required permissions, will be updated as the required permissions changes.
- `not_actions` (List of String, Deprecated) Azure disallowed actions. **Deprecated:** use `subscription_not_actions` and `resource_group_not_actions` instead.
- `not_data_actions` (List of String, Deprecated) Azure disallowed data actions. **Deprecated:** use `subscription_not_data_actions` and `resource_group_not_data_actions` instead.
- `resource_group_actions` (List of String) Azure allowed actions on the resource group level.
- `resource_group_data_actions` (List of String) Azure allowed data actions on the resource group level.
- `resource_group_not_actions` (List of String) Azure disallowed actions on the resource group level.
- `resource_group_not_data_actions` (List of String) Azure disallowed data actions on the resource group level.
- `subscription_actions` (List of String) Azure allowed actions on the subscription level.
- `subscription_data_actions` (List of String) Azure allowed data actions on the subscription level.
- `subscription_not_actions` (List of String) Azure disallowed actions on the subscription level.
- `subscription_not_data_actions` (List of String) Azure disallowed data actions on the subscription level.
